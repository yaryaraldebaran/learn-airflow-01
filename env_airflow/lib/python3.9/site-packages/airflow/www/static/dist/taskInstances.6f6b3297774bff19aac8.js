/*! For license information please see taskInstances.6f6b3297774bff19aac8.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Airflow=e():(t.Airflow=t.Airflow||{},t.Airflow.taskInstances=e())}(self,(()=>(()=>{"use strict";var t={4965:(t,e,a)=>{a.d(e,{dagTZ:()=>d});var n=a(8956),r=a(1068),o=a(3307);const s=(0,n.au)("dag_id"),i=(0,n.au)("paused_url"),d=(0,n.au)("dag_timezone"),m=(0,n.au)("datasets_url"),c={createAfter:(0,n.au)("next_dagrun_create_after"),intervalStart:(0,n.au)("next_dagrun_data_interval_start"),intervalEnd:(0,n.au)("next_dagrun_data_interval_end")};let l,u=[];const p=(t,e)=>{u=t,l=e};$(window).on("load",(function(){$(`a[href*="${this.location.pathname}"]`).parent().addClass("active"),$(".never_active").removeClass("active");const t=$("#next-dataset-tooltip");$(t).data("uri")||(0,o.l)(s,t,p)})),$("#pause_resume").on("change",(function(){const t=$(this),e=t.data("dag-id"),a=t.is(":checked"),n=`${i}?is_paused=${a}&dag_id=${encodeURIComponent(e)}`;t.trigger("blur"),t.removeClass("switch-input--error");const r=new CustomEvent("paused",{detail:a});document.dispatchEvent(r),$.post(n).fail((()=>{setTimeout((()=>{t.prop("checked",!a),t.addClass("switch-input--error"),r.value=!a,document.dispatchEvent(r)}),500)}))})),$("#next-run").on("mouseover",(()=>{$("#next-run").attr("data-original-title",(()=>{let t="";return c.createAfter&&(t+=`<strong>Run After:</strong> ${(0,r.o0)(c.createAfter)}<br>`,t+=`Next Run: ${(0,r.K5)(c.createAfter)}<br><br>`),c.intervalStart&&c.intervalEnd&&(t+="<strong>Data Interval</strong><br>",t+=`Start: ${(0,r.o0)(c.intervalStart)}<br>`,t+=`End: ${(0,r.o0)(c.intervalEnd)}`),t}))})),$(".next-dataset-triggered").on("click",(t=>{const e=$("#next-dataset-tooltip"),a=$(t.target).data("summary"),n=$(e).data("uri");n?window.location.href=`${m}?uri=${encodeURIComponent(n)}`:(0,o.R)(s,a,u,l)}))},3307:(t,e,a)=>{a.d(e,{R:()=>r,l:()=>o});var n=a(8956);function r(t,e="",a=[],r=null){const o=(0,n.au)("datasets_url");$("#datasets_tbody").empty(),$("#datasets_error").hide(),$("#dag_id").text(t),$("#datasetNextRunModal").modal({}),$("#next_run_summary").text(e),a.forEach((t=>{const e=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("a");n.href=`${o}?uri=${encodeURIComponent(t.uri)}`,n.innerText=t.uri,a.append(n);const r=document.createElement("td");t.lastUpdate&&r.append(isoDateToTimeEl(t.lastUpdate)),e.append(a),e.append(r),$("#datasets_tbody").append(e)})),r&&($("#datasets_error_msg").text(r),$("#datasets_error").show())}function o(t,e,a){let r=(0,n.au)("next_run_datasets_url");t&&(r.includes("__DAG_ID__")&&(r=r.replace("__DAG_ID__",t)),$.get(r).done((t=>{let n=0,r="<strong>Pending datasets:</strong><br>";a(t),t.forEach((t=>{t.created_at||(n<4&&(r+=`${t.uri}<br>`),n+=1)})),n>4&&(r+=`<br>And ${n-4} more.`),r+="<br>Click to see more details.",$(e).attr("data-original-title",(()=>r))})).fail(((t,e,n)=>{const r=t.responseJSON&&t.responseJSON.error||"Something went wrong.";a([],`${e}: ${n} ${r}`)})))}},1068:(t,e,a)=>{a.d(e,{$O:()=>i,K5:()=>u,M1:()=>d,n0:()=>m,o0:()=>c,oY:()=>l,sK:()=>n,z6:()=>s});const n="YYYY-MM-DD, HH:mm:ss",r="YYYY-MM-DD, HH:mm:ss z",o="z (Z)",s="YYYY-MM-DDThh:mm:ssTZD",i="timezone";function d(t){return t instanceof moment?t.isUTC()?"UTC":t.format(o):"UTC"===t?t:moment().tz(t).format(o)}function m(t,e){const a=moment(t),r=$.extend({title:!0},e).title,o=document.createElement("time");return o.setAttribute("datetime",a.format()),r&&o.setAttribute("title",a.isUTC()?"":`UTC: ${a.clone().utc().format()}`),o.innerText=a.format(n),o}const c=t=>moment(t).format(r);function l(t){moment.tz.setDefault(t),$('time[data-datetime-convert!="false"]').each(((t,e)=>{const a=$(e),o=moment(a.attr("datetime"));o._isValid&&a.text(o.format(a.data("with-tz")?r:n)),void 0!==a.attr("title")&&a.attr("title",o.isUTC()?"":`UTC: ${o.clone().utc().format()}`)})),$(".datetime input").each(((t,e)=>{e.value=moment(e.value).format()}))}const u=t=>`${moment(t).fromNow()}`},5122:(t,e,a)=>{a.d(e,{escapeHtml:()=>i});var n=a(1068);function r(){const t=moment();$("#clock").attr("datetime",t.format(n.z6)).html(`${t.format("HH:mm")} <strong>${(0,n.M1)(t)}</strong>`)}function o(t){localStorage.setItem("selected-timezone",t);const e=new CustomEvent(n.$O,{detail:t});document.dispatchEvent(e),(0,n.oY)(t),r(),$("body").trigger({type:"airflow.timezone-change",timezone:t})}window.isoDateToTimeEl=n.n0,window.moment=Airflow.moment;const s=document.createElement("span");function i(t){return s.textContent=t,s.innerHTML}function d(t){const e=$(t),a=$(".filter_val.form-control",e.parents("tr"));"Is Null"===e.text()||"Is not Null"===e.text()?(void 0!==a.attr("required")&&(a.removeAttr("required"),a.attr("airflow-required",!0)),1===a.parent(".datetime").length?a.parent(".datetime").hide():a.hide()):("true"===a.attr("airflow-required")&&(a.attr("required",!0),a.removeAttr("airflow-required")),1===a.parent(".datetime").length?a.parent(".datetime").show():a.show())}window.escapeHtml=i,window.convertSecsToHumanReadable=function(t){const e=t,a=e-Math.floor(e);t=Math.floor(t);const n=Math.floor(t/3600);t-=3600*n;const r=Math.floor(t/60);let o="";return n>0&&(o+=`${n}Hours `),r>0&&(o+=`${r}Min `),(t-=60*r)+a>0&&(Math.floor(e)===e?o+=`${t}Sec`:o+=`${(t+=a).toFixed(3)}Sec`),o},window.postAsForm=function(t,e){const a=$("<form></form>");a.attr("method","POST"),a.attr("action",t),$.each(e||{},((t,e)=>{const n=$("<input></input>");n.attr("type","hidden"),n.attr("name",t),n.attr("value",e),a.append(n)}));const n=$("<input></input>");n.attr("type","hidden"),n.attr("name","csrf_token"),n.attr("value",csrfToken),a.append(n),$(document.body).append(a),a.submit()},$(document).ready((()=>{!function(){const t=moment.tz.guess(),e=localStorage.getItem("selected-timezone"),a=localStorage.getItem("chosen-timezone");function r(e){localStorage.setItem("chosen-timezone",e),e!==t||e!==Airflow.serverTimezone?($("#timezone-manual a").data("timezone",e).text((0,n.M1)(e)),$("#timezone-manual").show()):$("#timezone-manual").hide()}a&&r(a),o(e||Airflow.defaultUITimezone),"UTC"!==Airflow.serverTimezone&&($("#timezone-server a").html(`${(0,n.M1)(Airflow.serverTimezone)} <span class="label label-primary">Server</span>`),$("#timezone-server").show()),Airflow.serverTimezone!==t?$("#timezone-local a").attr("data-timezone",t).html(`${(0,n.M1)(t)} <span class="label label-info">Local</span>`):$("#timezone-local").hide(),$("a[data-timezone]").click((t=>{o($(t.currentTarget).data("timezone"))})),$("#timezone-other").typeahead({source:$(moment.tz.names().map((t=>({category:t.split("/",1)[0],name:t.replace("_"," "),tzName:t})))),showHintOnFocus:"all",showCategoryHeader:!0,items:"all",afterSelect(t){this.$element.val(""),r(t.tzName),o(t.tzName),setTimeout((()=>{document.activeElement.blur(),this.shown=!1,this.focused=!1}),1)}})}(),$("#clock").attr("data-original-title",hostName).attr("data-placement","bottom").parent().show(),r(),setInterval(r,1e3),$.ajaxSetup({beforeSend(t,e){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",csrfToken)}}),$.fn.datetimepicker.defaults.sideBySide=!0,$(".datetimepicker").datetimepicker({format:"YYYY-MM-DDTHH:mm:ssZ"}),$(".filters .select2-chosen").each(((t,e)=>{d(e)})),$(".filters .select2-chosen").on("DOMNodeInserted",(t=>{d(t.target)})),$("#filter_form a.filter").click((()=>{$(".datetimepicker").datetimepicker(),$(".filters .select2-chosen").on("DOMNodeInserted",(t=>{d(t.target)}))})),$(".js-tooltip").tooltip()}))},8956:(t,e,a)=>{a.d(e,{Z2:()=>r,au:()=>n});function n(t){const e=document.querySelector(`meta[name="${t}"]`);return e&&e.getAttribute("content")||""}const r=()=>new Map([["success",0],["failed",0],["upstream_failed",0],["up_for_retry",0],["up_for_reschedule",0],["running",0],["deferred",0],["queued",0],["scheduled",0],["skipped",0],["no_status",0]])}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,a),o.exports}a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{a.r(n),a.d(n,{default:()=>i,taskNoInstanceTooltip:()=>d});var t=a(5122),e=a(1068),r=a(4965),o=a(8956);function s(t,a){const n=a&&a instanceof moment&&a.isValid();return`Started: ${t.format(e.sK)}<br>Ended: ${n?a.format(e.sK):"Not ended yet"}<br>`}function i(a,n,{includeTryNumber:i=!1}={}){let d="";if(void 0!==a.state&&(d+=`<strong>Status:</strong> ${(0,t.escapeHtml)(a.state)}<br><br>`),a.mapped_states){const e=(0,o.Z2)();a.mapped_states.forEach((t=>{const a=t||"no_status";e.has(a)&&e.set(a,e.get(a)+1)})),d+=`<strong>${(0,t.escapeHtml)(a.mapped_states.length)} ${1===a.mapped_states.length?"Task":"Tasks"} Mapped</strong><br />`,e.forEach(((e,a)=>{e>0&&(d+=`<span style="margin-left: 15px">${(0,t.escapeHtml)(a)}: ${(0,t.escapeHtml)(e)}</span><br />`)})),d+="<br />"}if(void 0!==a.task_id&&(d+=`Task_id: ${(0,t.escapeHtml)(a.task_id)}<br>`),d+=`Run: ${(0,e.o0)(a.execution_date)}<br>`,void 0!==a.run_id&&(d+=`Run Id: <nobr>${(0,t.escapeHtml)(a.run_id)}</nobr><br>`),a.map_index>=0&&!a.mapped_states&&(d+=`Map Index: ${(0,t.escapeHtml)(a.map_index)}<br>`),void 0!==a.operator&&(d+=`Operator: ${(0,t.escapeHtml)(a.operator)}<br>`),n&&n.trigger_rule&&(d+=`Trigger Rule: ${n.trigger_rule}<br>`),"running"===a.state){const t=a.start_date instanceof moment?a.start_date:moment(a.start_date);a.duration=moment().diff(t,"second")}else if(!a.duration&&a.end_date){const t=a.start_date instanceof moment?a.start_date:moment(a.start_date),e=a.end_date instanceof moment?a.end_date:moment(a.end_date);a.duration=moment(e).diff(t,"second")}d+=`Duration: ${(0,t.escapeHtml)(convertSecsToHumanReadable(a.duration))}<br>`;const m=a.data_interval_start,c=a.data_interval_end;return m&&c&&(d+="<br><strong>Data Interval:</strong><br>",d+=`Start: ${(0,e.o0)(m)}<br>`,d+=`End: ${(0,e.o0)(c)}<br>`),i&&(d+=`Try Number: ${(0,t.escapeHtml)(a.try_number)}<br>`),d+=function(t,e,a){if(!t)return"<br><em>Not yet started</em>";const n="z (Z)",r=moment.defaultZone.name.toUpperCase(),o=moment.utc(t),i=moment.utc(e),d=a.toUpperCase();let m="<br><strong>UTC:</strong><br>";m+=s(o,i),"UTC"!==r&&(o.tz(r),m+=`<br><strong>Local: ${o.format(n)}</strong><br>`,m+=s(o,i&&i instanceof moment?i.tz(r):i));"UTC"!==d&&d!==r&&(o.tz(d),m+=`<br><strong>DAG's TZ: ${o.format(n)}</strong><br>`,m+=s(o,i&&i instanceof moment?i.tz(d):i));return m}(a.start_date,a.end_date,r.dagTZ||"UTC"),d}function d(e,a){let n="";return e&&(n+=`Task_id: ${(0,t.escapeHtml)(e)}<br>`),void 0!==a.task_type&&(n+=`Operator: ${(0,t.escapeHtml)(a.task_type)}<br>`),n+="<br><em>DAG has yet to run.</em>",n}window.tiTooltip=i,window.taskNoInstanceTooltip=d})(),n})()));